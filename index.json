{"repository_name":"Spark","body":"# Spark\n\n![Shard CI](https://github.com/stephendolan/spark/workflows/Shard%20CI/badge.svg)\n[![API Documentation Website](https://img.shields.io/website?down_color=red&down_message=Offline&label=API%20Documentation&up_message=Online&url=https%3A%2F%2Fstephendolan.github.io%2Fspark%2F)](https://stephendolan.github.io/spark)\n[![GitHub release](https://img.shields.io/github/release/stephendolan/spark.svg?label=Release)](https://github.com/stephendolan/spark/releases)\n\n## Installation\n\nAdd the dependency to your `shard.yml`:\n\n```yaml\ndependencies:\n  spark:\n    github: stephendolan/spark\n```\n\nRun `shards install`\n\n## Library usage\n\nRequire the shard:\n\n```crystal\nrequire \"spark\"\n```\n\nThen, use any of the fully documented modules below to interact with your user:\n\n- ‚ö°Ô∏è &nbsp; **[Spark](https://stephendolan.github.io/spark/Spark.html)**\n  - [`.indent`](https://stephendolan.github.io/spark/Spark.html#indent-instance-method) - Increase indentation for all Spark output by one level\n  - [`.outdent`](https://stephendolan.github.io/spark/Spark.html#outdent-instance-method) - Decrease indentation for all Spark output by one level\n  - [`.reset_indentation`](https://stephendolan.github.io/spark/Spark.html#reset_indentation-instance-method) - Set the indentation level for all Spark output back to zero\n- üí¨ &nbsp; **[Spark::Prompt](https://stephendolan.github.io/spark/Spark/Prompt.html)**\n  - [`#say`](<https://stephendolan.github.io/spark/Spark/Prompt.html#say(message:String=%22%22,**options)-instance-method>) - Display a message to a user\n  - [`#ask`](<https://stephendolan.github.io/spark/Spark/Prompt.html#ask(message:String,**options)-instance-method>) - Get information from a user\n  - [`#yes?`](<https://stephendolan.github.io/spark/Spark/Prompt.html#yes?(message:String,**options)-instance-method>) - Get confirmation from a user, with a default of \"Yes\"\n  - [`#no?`](<https://stephendolan.github.io/spark/Spark/Prompt.html#no?(message:String,**options)-instance-method>) - Get confirmation from a user, with a default of \"No\"\n  - [`#newline`](https://stephendolan.github.io/spark/Spark/Prompt.html#newline-instance-method) - Output a blank line to the user's prompt\n- üìÑ &nbsp; **[Spark::Template](https://stephendolan.github.io/spark/Spark/Template.html)**\n  - [`.run_remote_file`](<https://stephendolan.github.io/spark/Spark/Template.html#run_remote_file(url:String,output:IO::FileDescriptor=STDOUT)-instance-method>) - Run Crystal code from a remote source (**USE WITH CAUTION**)\n  - [`.run_local_file`](<https://stephendolan.github.io/spark/Spark/Template.html#run_local_file(file_path:String,output:IO::FileDescriptor=STDOUT)-instance-method>) - Run Crystal code from a local file source (**USE WITH CAUTION**)\n- üóÑ &nbsp; **[Spark::File](https://stephendolan.github.io/spark/Spark/File.html)**\n  - [`.replace_in_file`](<https://stephendolan.github.io/spark/Spark/File.html#replace_in_file(relative_path:String,pattern:Regex%7CString,replacement:String)-instance-method>) - Replace some content in a file\n  - [`.inject_into_file`](<https://stephendolan.github.io/spark/Spark/File.html#inject_into_file(relative_path:String,*content,afterpattern:Regex%7CString)-instance-method>) - Insert content into a file before or after a pattern\n  - [`.prepend_to_file`](<https://stephendolan.github.io/spark/Spark/File.html#prepend_to_file(relative_path:String,*content)-instance-method>) - Insert content at the beginning of a file\n  - [`.append_to_file`](<https://stephendolan.github.io/spark/Spark/File.html#append_to_file(relative_path:String,*content)-instance-method>) - Insert content at the end of a file\n  - [`.copy_file`](<https://stephendolan.github.io/spark/Spark/File.html#copy_file(source_path:String,destination_path:String):String-instance-method>) - Copy a file (very few safeguards in place currently)\n  - [`.move_file`](<https://stephendolan.github.io/spark/Spark/File.html#move_file(source_path:String,destination_path:String):String-instance-method>) - Move a file (very few safeguards in place currently)\n  - [`.create_file`](<https://stephendolan.github.io/spark/Spark/File.html#create_file(relative_path:String,*content):String-instance-method>) - Create a file (very few safeguards in place currently)\n  - [`.remove_file`](<https://stephendolan.github.io/spark/Spark/File.html#remove_file(relative_path:String)-instance-method>) - Remove a file\n  - [`.chmod_file`](<https://stephendolan.github.io/spark/Spark/File.html#chmod_file(file_path:String,permissions:Int%7C::File::Permissions)-instance-method>) - Change the permissions of a file\n- üíé &nbsp; **[Spark::Shard](https://stephendolan.github.io/spark/Spark/Shard.html)**\n  - [`#add_shard`](<https://stephendolan.github.io/spark/Spark/Shard.html#add_shard(name:String,*,development_only:Bool=false,**options)-instance-method>) - Adds a shard to the `shard.yml` file\n\n## Command line usage\n\nSpark ships with a command line interface, installed in a `postinstall` step when you `shards install`. The resulting binary will be located at `./bin/spark`.\n\nWith this CLI installed, you have access to the following commands:\n\n- `./bin/spark apply [Remote Template URL]` - Runs the content returned from the provided URL through `crystal run`\n- `./bin/spark apply --local [Local File Path]` - Runs the content of the provided file path through `crystal run`\n\n## Development\n\n1. Add your code\n1. Ensure specs pass with `crystal spec`\n1. Ensure correct formatting with `crystal tool format --check`\n1. Ensure correct style with `./bin/ameba`\n\n## Contributing\n\n1. Fork it (<https://github.com/stephendolan/spark/fork>)\n1. Create your feature branch (`git checkout -b my-new-feature`)\n1. Commit your changes (`git commit -am 'Add some feature'`)\n1. Push to the branch (`git push origin my-new-feature`)\n1. Create a new Pull Request\n\n## Credits & Inspirations\n\n- [TTY](https://github.com/piotrmurach/tty) because of the excellent code and organization\n- [Thor](https://github.com/erikhuda/thor) because I've loved using it with Ruby and Rails\n- [Ameba](https://github.com/crystal-ameba/ameba) because of their excellent shard CLI\n\n## Contributors\n\n- [Stephen Dolan](https://github.com/your-github-user) - creator and maintainer\n","program":{"html_id":"Spark/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"Spark","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"Spark/Spark","path":"Spark.html","kind":"module","full_name":"Spark","name":"Spark","abstract":false,"locations":[{"filename":"src/spark.cr","line_number":5,"url":null},{"filename":"src/spark/file.cr","line_number":5,"url":null},{"filename":"src/spark/file/create_file.cr","line_number":1,"url":null},{"filename":"src/spark/file/invalid_path_error.cr","line_number":1,"url":null},{"filename":"src/spark/prompt.cr","line_number":5,"url":null},{"filename":"src/spark/prompt/confirmation_question.cr","line_number":3,"url":null},{"filename":"src/spark/prompt/question.cr","line_number":1,"url":null},{"filename":"src/spark/prompt/statement.cr","line_number":1,"url":null},{"filename":"src/spark/shard.cr","line_number":3,"url":null},{"filename":"src/spark/shard/missing_shard_file_error.cr","line_number":1,"url":null},{"filename":"src/spark/shard/shard_content.cr","line_number":1,"url":null},{"filename":"src/spark/shard/shard_file.cr","line_number":1,"url":null},{"filename":"src/spark/template.cr","line_number":3,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"{{ (`shards version \\\"/__w/spark/spark/src\\\"`).chomp.stringify }}"}],"extended_modules":[{"html_id":"Spark/Spark","kind":"module","full_name":"Spark","name":"Spark"}],"doc":"Spark is a CLI Utility library that makes working with users on the\ncommand line simpler than ever.","summary":"<p>Spark is a CLI Utility library that makes working with users on the command line simpler than ever.</p>","instance_methods":[{"html_id":"indent-instance-method","name":"indent","doc":"Increase the indentation level for `Spark` output by one level.","summary":"<p>Increase the indentation level for <code><a href=\"Spark.html\">Spark</a></code> output by one level.</p>","abstract":false,"location":{"filename":"src/spark.cr","line_number":18,"url":null},"def":{"name":"indent","visibility":"Public","body":"@@indent_level = @@indent_level + 1"},"external_var":false},{"html_id":"indent_level-instance-method","name":"indent_level","abstract":false,"location":{"filename":"src/spark.cr","line_number":13,"url":null},"def":{"name":"indent_level","visibility":"Public","body":"@@indent_level"},"external_var":false},{"html_id":"logger:Spark::Prompt-instance-method","name":"logger","doc":"Which object to use for logging optional output to users.","summary":"<p>Which object to use for logging optional output to users.</p>","abstract":false,"location":{"filename":"src/spark.cr","line_number":87,"url":null},"def":{"name":"logger","return_type":"Spark::Prompt","visibility":"Public","body":"if (value = @@logger).nil?\n  @@logger = Spark::Prompt.new\nelse\n  value\nend"},"external_var":false},{"html_id":"logger=(logger:Spark::Prompt)-instance-method","name":"logger=","doc":"Control which object is used to log optional output to users.\n\nExample:\n```\nSpark.logger = Spark::Prompt.new(input: File.tempfile.open, output: File.tempfile.open)\n```","summary":"<p>Control which object is used to log optional output to users.</p>","abstract":false,"args":[{"name":"logger","external_name":"logger","restriction":"Spark::Prompt"}],"args_string":"(logger : Spark::Prompt)","args_html":"(logger : <a href=\"Spark/Prompt.html\">Spark::Prompt</a>)","location":{"filename":"src/spark.cr","line_number":101,"url":null},"def":{"name":"logger=","args":[{"name":"logger","external_name":"logger","restriction":"Spark::Prompt"}],"visibility":"Public","body":"@@logger = logger"},"external_var":false},{"html_id":"outdent-instance-method","name":"outdent","doc":"Decrease the indentation level for `Spark` output by one level.\n\nCannot be decreased below zero.","summary":"<p>Decrease the indentation level for <code><a href=\"Spark.html\">Spark</a></code> output by one level.</p>","abstract":false,"location":{"filename":"src/spark.cr","line_number":25,"url":null},"def":{"name":"outdent","visibility":"Public","body":"@@indent_level = @@indent_level - 1\n\nif @@indent_level < 0\n  @@indent_level = 0\nend\n"},"external_var":false},{"html_id":"quiet(active:Bool=true,&)-instance-method","name":"quiet","doc":"Force a block of code to run in a temporary quiet mode setting.\n\nExample temporarily enabling:\n```\nSpark.quiet do\n  Spark::Prompt.new.log_action(\"TESTING\")\nend\n# => \"\"\n```\n\nExample temporarily disabling:\n```\nSpark.quiet(false) do\n  Spark::Prompt.new.log_action(\"TESTING\")\nend\n# => \"\"\n```","summary":"<p>Force a block of code to run in a temporary quiet mode setting.</p>","abstract":false,"args":[{"name":"active","default_value":"true","external_name":"active","restriction":"Bool"}],"args_string":"(active : Bool = true, &)","args_html":"(active : Bool = <span class=\"n\">true</span>, &)","location":{"filename":"src/spark.cr","line_number":75,"url":null},"def":{"name":"quiet","args":[{"name":"active","default_value":"true","external_name":"active","restriction":"Bool"}],"yields":0,"block_arity":0,"visibility":"Public","body":"old_quiet_value = quiet?\n@@quiet = active\n\noutput = yield\n\n@@quiet = old_quiet_value\n\noutput\n"},"external_var":false},{"html_id":"quiet=(quiet)-instance-method","name":"quiet=","doc":"Control whether or not optional terminal output is displayed to users.\n\nExample:\n```\nSpark.logger.log_action(\"Testing\") # => This will print something to the user\nSpark.quiet = true\nSpark.logger.log_action(\"Testing\") # => Nothing will print to the user\n```","summary":"<p>Control whether or not optional terminal output is displayed to users.</p>","abstract":false,"args":[{"name":"quiet","external_name":"quiet","restriction":""}],"args_string":"(quiet)","args_html":"(quiet)","location":{"filename":"src/spark.cr","line_number":55,"url":null},"def":{"name":"quiet=","args":[{"name":"quiet","external_name":"quiet","restriction":""}],"visibility":"Public","body":"@@quiet = quiet"},"external_var":false},{"html_id":"quiet?-instance-method","name":"quiet?","doc":"Whether or not to suppress optional terminal output to users.","summary":"<p>Whether or not to suppress optional terminal output to users.</p>","abstract":false,"location":{"filename":"src/spark.cr","line_number":39,"url":null},"def":{"name":"quiet?","visibility":"Public","body":"if (value = @@quiet).nil?\n  @@quiet = false\nelse\n  value\nend"},"external_var":false},{"html_id":"reset_indentation-instance-method","name":"reset_indentation","doc":"Reset the Spark indentation level back to 0.","summary":"<p>Reset the Spark indentation level back to 0.</p>","abstract":false,"location":{"filename":"src/spark.cr","line_number":34,"url":null},"def":{"name":"reset_indentation","visibility":"Public","body":"@@indent_level = 0"},"external_var":false}],"types":[{"html_id":"Spark/Spark/Cli","path":"Spark/Cli.html","kind":"module","full_name":"Spark::Cli","name":"Cli","abstract":false,"locations":[{"filename":"src/spark/cli/runner.cr","line_number":4,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"extended_modules":[{"html_id":"Spark/Spark/Cli","kind":"module","full_name":"Spark::Cli","name":"Cli"}],"namespace":{"html_id":"Spark/Spark","kind":"module","full_name":"Spark","name":"Spark"},"instance_methods":[{"html_id":"parse_arguments(args,opts=Opts.new)-instance-method","name":"parse_arguments","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""},{"name":"opts","default_value":"Opts.new","external_name":"opts","restriction":""}],"args_string":"(args, opts = Opts.new)","args_html":"(args, opts = <span class=\"t\">Opts</span>.new)","location":{"filename":"src/spark/cli/runner.cr","line_number":36,"url":null},"def":{"name":"parse_arguments","args":[{"name":"args","external_name":"args","restriction":""},{"name":"opts","default_value":"Opts.new","external_name":"opts","restriction":""}],"visibility":"Public","body":"OptionParser.parse(args) do |parser|\n  parser.banner = \"Usage: spark [subcommand]\"\n\n  parser.on(\"-v\", \"--version\", \"Print version\") do print_version end\n  parser.on(\"-h\", \"--help\", \"Show help\") do print_help(parser) end\n\n  parser.on(\"apply\", \"Apply a remote template\") do\n    parser.banner = \"Usage: spark apply [flags] [template1 template2 ...]\"\n    opts.command = Command::Apply\n\n    parser.on(\"-l\", \"--local\", \"Apply a local file instead of a remote URL\") do\n      opts.local = true\n    end\n\n    parser.unknown_args do |arguments|\n      if arguments.empty?\n        print_help(parser)\n      end\n\n      opts.template_locations = arguments\n    end\n  end\n\n  if args.empty?\n    print_help(parser)\n  end\nend\n\nopts\n"},"external_var":false},{"html_id":"run(args=ARGV)-instance-method","name":"run","abstract":false,"args":[{"name":"args","default_value":"ARGV","external_name":"args","restriction":""}],"args_string":"(args = ARGV)","args_html":"(args = <span class=\"t\">ARGV</span>)","location":{"filename":"src/spark/cli/runner.cr","line_number":7,"url":null},"def":{"name":"run","args":[{"name":"args","default_value":"ARGV","external_name":"args","restriction":""}],"visibility":"Public","body":"begin\n  options = parse_arguments(args)\n\n  case options.command\n  when Command::Apply\n    if templates = options.template_locations\n    else\n      return\n    end\n    templates.each do |template_location|\n      if options.local?\n        Spark::Template.run_local_file(template_location)\n      else\n        Spark::Template.run_remote_file(template_location)\n      end\n    end\n  end\nrescue exception\n  puts(\"Error: #{exception.message}\")\n  exit(255)\nend"},"external_var":false}]},{"html_id":"Spark/Spark/File","path":"Spark/File.html","kind":"module","full_name":"Spark::File","name":"File","abstract":false,"locations":[{"filename":"src/spark/file.cr","line_number":7,"url":null},{"filename":"src/spark/file/create_file.cr","line_number":2,"url":null},{"filename":"src/spark/file/invalid_path_error.cr","line_number":2,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"BEGINNING_OF_FILE_REGEX","name":"BEGINNING_OF_FILE_REGEX","value":"/\\A/"},{"id":"END_OF_FILE_REGEX","name":"END_OF_FILE_REGEX","value":"/\\z/"}],"extended_modules":[{"html_id":"Spark/Spark/File","kind":"module","full_name":"Spark::File","name":"File"}],"namespace":{"html_id":"Spark/Spark","kind":"module","full_name":"Spark","name":"Spark"},"doc":"Spark::File allows you to interact with the user's filesystem.","summary":"<p>Spark::File allows you to interact with the user's filesystem.</p>","instance_methods":[{"html_id":"append_to_file(relative_path:String,*content)-instance-method","name":"append_to_file","doc":"Append any number of strings to the end of a file.\n\nExample:\n```\nSpark::File.append_to_file(\"README.md\", \"# Goodbye!\", \"You're at the bottom of the README.\")\n```","summary":"<p>Append any number of strings to the end of a file.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":""}],"args_string":"(relative_path : String, *content)","args_html":"(relative_path : String, *content)","location":{"filename":"src/spark/file.cr","line_number":63,"url":null},"def":{"name":"append_to_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":""}],"splat_index":1,"visibility":"Public","body":"inject_into_file(relative_path, *content, after: END_OF_FILE_REGEX)"},"external_var":false},{"html_id":"append_to_file(relative_path:String,&:->String)-instance-method","name":"append_to_file","doc":"Append the provided block content to the end of a file.\n\nExample:\n```\nSpark::File.append_to_file(\"README.md\") do\n  <<-CONTENT\n  # Goodbye\n\n  You're at the bottom of the README.\n  CONTENT\nend\n```","summary":"<p>Append the provided block content to the end of a file.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"}],"args_string":"(relative_path : String, & :  -> String)","args_html":"(relative_path : String, & :  -> String)","location":{"filename":"src/spark/file.cr","line_number":79,"url":null},"def":{"name":"append_to_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"}],"yields":0,"block_arity":0,"block_arg":{"name":"","external_name":"","restriction":"(-> String)"},"visibility":"Public","body":"inject_into_file(relative_path, yield, after: END_OF_FILE_REGEX)"},"external_var":false},{"html_id":"chmod_file(file_path:String,permissions:Int|::File::Permissions)-instance-method","name":"chmod_file","doc":"Change the permissions of the specified file.\n\nExample:\n```\nSpark::File.chmod_file(\"README.md\", File::Permissions::All)\nFile.info(\"README.md\").permissions.value # => 0o777\n```","summary":"<p>Change the permissions of the specified file.</p>","abstract":false,"args":[{"name":"file_path","external_name":"file_path","restriction":"String"},{"name":"permissions","external_name":"permissions","restriction":"Int | ::File::Permissions"}],"args_string":"(file_path : String, permissions : Int | ::File::Permissions)","args_html":"(file_path : String, permissions : Int | ::File::Permissions)","location":{"filename":"src/spark/file.cr","line_number":175,"url":null},"def":{"name":"chmod_file","args":[{"name":"file_path","external_name":"file_path","restriction":"String"},{"name":"permissions","external_name":"permissions","restriction":"Int | ::File::Permissions"}],"visibility":"Public","body":"raise_unless_exists(file_path)\n\nSpark.logger.log_action(\"CHANGING PERMISSIONS\", file_path, color: :yellow)\n::File.chmod(file_path, permissions)\n"},"external_var":false},{"html_id":"copy_file(source_path:String,destination_path:String):String-instance-method","name":"copy_file","doc":"Copy a file from a provided source path to a provided destination.\n\nExample:\n```\nSpark::File.copy_file(\"README.md\", \"IDENTICAL_README.md\")\n```","summary":"<p>Copy a file from a provided source path to a provided destination.</p>","abstract":false,"args":[{"name":"source_path","external_name":"source_path","restriction":"String"},{"name":"destination_path","external_name":"destination_path","restriction":"String"}],"args_string":"(source_path : String, destination_path : String) : String","args_html":"(source_path : String, destination_path : String) : String","location":{"filename":"src/spark/file.cr","line_number":136,"url":null},"def":{"name":"copy_file","args":[{"name":"source_path","external_name":"source_path","restriction":"String"},{"name":"destination_path","external_name":"destination_path","restriction":"String"}],"return_type":"String","visibility":"Public","body":"raise_unless_exists(source_path)\n\nSpark.logger.log_action(\"COPYING\", \"'#{source_path}' to '#{destination_path}'\", color: :green)\nSpark.quiet do\n  create_file(destination_path, ::File.read(source_path))\nend\n"},"external_var":false},{"html_id":"create_file(relative_path:String,*content):String-instance-method","name":"create_file","doc":"Create a new file with the provided content.\n\nExample:\n```\nSpark::File.create_file(\"README.md\", \"# Welcome\\n\\n\", \"This is my new file.\")\n```","summary":"<p>Create a new file with the provided content.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":""}],"args_string":"(relative_path : String, *content) : String","args_html":"(relative_path : String, *content) : String","location":{"filename":"src/spark/file.cr","line_number":89,"url":null},"def":{"name":"create_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":""}],"splat_index":1,"return_type":"String","visibility":"Public","body":"file_content = content.join\n\n(CreateFile.new(relative_path, file_content)).call\n"},"external_var":false},{"html_id":"create_file(relative_path:String,&:->String):String-instance-method","name":"create_file","doc":"Create a new file with the provided block content.\n\nExample:\n```\nSpark::File.create_file(\"README.md\") do\n  <<-CONTENT\n  # Welcome\n\n  This is my new file.\n  CONTENT\nend\n```","summary":"<p>Create a new file with the provided block content.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"}],"args_string":"(relative_path : String, & :  -> String) : String","args_html":"(relative_path : String, & :  -> String) : String","location":{"filename":"src/spark/file.cr","line_number":107,"url":null},"def":{"name":"create_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"}],"yields":0,"block_arity":0,"block_arg":{"name":"","external_name":"","restriction":"(-> String)"},"return_type":"String","visibility":"Public","body":"(CreateFile.new(relative_path, yield)).call"},"external_var":false},{"html_id":"inject_into_file(relative_path:String,*content,afterpattern:Regex|String)-instance-method","name":"inject_into_file","doc":"Inject any number of strings *after* the provided pattern.\n\nExample:\n```\nSpark::File.inject_into_file(\"README.md\", \"# New Section\", after: \"# Last Section\\n\")\n```","summary":"<p>Inject any number of strings <em>after</em> the provided pattern.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":""},{"name":"pattern","external_name":"after","restriction":"Regex | String"}],"args_string":"(relative_path : String, *content, after pattern : Regex | String)","args_html":"(relative_path : String, *content, after pattern : Regex | String)","location":{"filename":"src/spark/file.cr","line_number":189,"url":null},"def":{"name":"inject_into_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":""},{"name":"pattern","external_name":"after","restriction":"Regex | String"}],"splat_index":1,"visibility":"Public","body":"replacement = \"\\\\0\" + content.join\n\nreplace_in_file(relative_path, pattern, replacement)\n"},"external_var":false},{"html_id":"inject_into_file(relative_path:String,*,afterpattern:Regex|String,&:->String)-instance-method","name":"inject_into_file","doc":"Inject the provided block content *after* the provided pattern.\n\nExample:\n```\nSpark::File.inject_into_file(\"README.md\", after: \"# Last Section\\n\") do\n  <<-CONTENT\n  This is some new file content.\n  It's going to be great!\\n\n  CONTENT\nend\n```","summary":"<p>Inject the provided block content <em>after</em> the provided pattern.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"","external_name":"","restriction":""},{"name":"pattern","external_name":"after","restriction":"Regex | String"}],"args_string":"(relative_path : String, *, after pattern : Regex | String, & :  -> String)","args_html":"(relative_path : String, *, after pattern : Regex | String, & :  -> String)","location":{"filename":"src/spark/file.cr","line_number":206,"url":null},"def":{"name":"inject_into_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"","external_name":"","restriction":""},{"name":"pattern","external_name":"after","restriction":"Regex | String"}],"splat_index":1,"yields":0,"block_arity":0,"block_arg":{"name":"","external_name":"","restriction":"(-> String)"},"visibility":"Public","body":"replacement = \"\\\\0#{yield}\"\n\nreplace_in_file(relative_path, pattern, replacement)\n"},"external_var":false},{"html_id":"inject_into_file(relative_path:String,*content,beforepattern:Regex|String)-instance-method","name":"inject_into_file","doc":"Inject any number of strings *before* the provided pattern.\n\nExample:\n```\nSpark::File.inject_into_file(\"README.md\", \"# New Section\", before: \"# First Section\\n\")\n```","summary":"<p>Inject any number of strings <em>before</em> the provided pattern.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":""},{"name":"pattern","external_name":"before","restriction":"Regex | String"}],"args_string":"(relative_path : String, *content, before pattern : Regex | String)","args_html":"(relative_path : String, *content, before pattern : Regex | String)","location":{"filename":"src/spark/file.cr","line_number":218,"url":null},"def":{"name":"inject_into_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":""},{"name":"pattern","external_name":"before","restriction":"Regex | String"}],"splat_index":1,"visibility":"Public","body":"replacement = content.join + \"\\\\0\"\n\nreplace_in_file(relative_path, pattern, replacement)\n"},"external_var":false},{"html_id":"inject_into_file(relative_path:String,*,beforepattern:Regex|String,&:->String)-instance-method","name":"inject_into_file","doc":"Inject the provided block content *before* the provided pattern.\n\nExample:\n```\nSpark::File.inject_into_file(\"README.md\", before: \"# First Section\\n\") do\n  <<-CONTENT\n  This is some new file content.\n  It's going to be great!\\n\n  CONTENT\nend\n```","summary":"<p>Inject the provided block content <em>before</em> the provided pattern.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"","external_name":"","restriction":""},{"name":"pattern","external_name":"before","restriction":"Regex | String"}],"args_string":"(relative_path : String, *, before pattern : Regex | String, & :  -> String)","args_html":"(relative_path : String, *, before pattern : Regex | String, & :  -> String)","location":{"filename":"src/spark/file.cr","line_number":235,"url":null},"def":{"name":"inject_into_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"","external_name":"","restriction":""},{"name":"pattern","external_name":"before","restriction":"Regex | String"}],"splat_index":1,"yields":0,"block_arity":0,"block_arg":{"name":"","external_name":"","restriction":"(-> String)"},"visibility":"Public","body":"replacement = \"#{yield}\\\\0\"\n\nreplace_in_file(relative_path, pattern, replacement)\n"},"external_var":false},{"html_id":"move_file(source_path:String,destination_path:String):String-instance-method","name":"move_file","doc":"Move a file from the provided source path to the provided destination.\n\nNote that the source file will no longer exist after this action.\nIf you wish to preserve the source file, use `Spark::File.copy_file`.\n\nExample:\n```\nSpark::File.move_file(\"README.md\", \"NEW_README.md\")\n```","summary":"<p>Move a file from the provided source path to the provided destination.</p>","abstract":false,"args":[{"name":"source_path","external_name":"source_path","restriction":"String"},{"name":"destination_path","external_name":"destination_path","restriction":"String"}],"args_string":"(source_path : String, destination_path : String) : String","args_html":"(source_path : String, destination_path : String) : String","location":{"filename":"src/spark/file.cr","line_number":155,"url":null},"def":{"name":"move_file","args":[{"name":"source_path","external_name":"source_path","restriction":"String"},{"name":"destination_path","external_name":"destination_path","restriction":"String"}],"return_type":"String","visibility":"Public","body":"raise_unless_exists(source_path)\n\nSpark.logger.log_action(\"MOVING\", \"'#{source_path}' to '#{destination_path}'\", color: :yellow)\nSpark.quiet do\n  new_path = copy_file(source_path, destination_path)\n  remove_file(source_path)\n\n  new_path\nend\n"},"external_var":false},{"html_id":"prepend_to_file(relative_path:String,*content)-instance-method","name":"prepend_to_file","doc":"Prepend any number of strings to the beginning of a file.\n\nExample:\n```\nSpark::File.prepend_to_file(\"README.md\", \"# Welcome!\", \"You're at the top of the README.\")\n```","summary":"<p>Prepend any number of strings to the beginning of a file.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":""}],"args_string":"(relative_path : String, *content)","args_html":"(relative_path : String, *content)","location":{"filename":"src/spark/file.cr","line_number":37,"url":null},"def":{"name":"prepend_to_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":""}],"splat_index":1,"visibility":"Public","body":"inject_into_file(relative_path, *content, before: BEGINNING_OF_FILE_REGEX)"},"external_var":false},{"html_id":"prepend_to_file(relative_path:String,&:->String)-instance-method","name":"prepend_to_file","doc":"Prepend the provided block content to the beginning of a file.\n\nExample:\n```\nSpark::File.prepend_to_file(\"README.md\") do\n  <<-CONTENT\n  # Welcome\n\n  You're at the top of the README.\n  CONTENT\nend\n```","summary":"<p>Prepend the provided block content to the beginning of a file.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"}],"args_string":"(relative_path : String, & :  -> String)","args_html":"(relative_path : String, & :  -> String)","location":{"filename":"src/spark/file.cr","line_number":53,"url":null},"def":{"name":"prepend_to_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"}],"yields":0,"block_arity":0,"block_arg":{"name":"","external_name":"","restriction":"(-> String)"},"visibility":"Public","body":"inject_into_file(relative_path, yield, before: BEGINNING_OF_FILE_REGEX)"},"external_var":false},{"html_id":"remove_file(relative_path:String)-instance-method","name":"remove_file","doc":"Remove a file.\n\nRemoving a single file:\n```\nSpark::File.remove_file(\"README.md\")\n```\n\nRemoving a directory:\n```\nSpark::File.remove_file(\"src/\")\n```","summary":"<p>Remove a file.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"}],"args_string":"(relative_path : String)","args_html":"(relative_path : String)","location":{"filename":"src/spark/file.cr","line_number":122,"url":null},"def":{"name":"remove_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"}],"visibility":"Public","body":"Spark.logger.log_action(\"REMOVING\", relative_path, color: :red)\nif ::File.exists?(relative_path)\nelse\n  return\nend\n\n::FileUtils.rm_r(relative_path)\n"},"external_var":false},{"html_id":"replace_in_file(relative_path:String,pattern:Regex|String,replacement:String)-instance-method","name":"replace_in_file","doc":"Replace a specific pattern with some replacement text throughout a given file.\n\nExample:\n```\nSpark::File.replace_in_file(\"shard.yml\", pattern: \"MIT\", replacement: \"Apache\")\n```","summary":"<p>Replace a specific pattern with some replacement text throughout a given file.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"pattern","external_name":"pattern","restriction":"Regex | String"},{"name":"replacement","external_name":"replacement","restriction":"String"}],"args_string":"(relative_path : String, pattern : Regex | String, replacement : String)","args_html":"(relative_path : String, pattern : Regex | String, replacement : String)","location":{"filename":"src/spark/file.cr","line_number":19,"url":null},"def":{"name":"replace_in_file","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"pattern","external_name":"pattern","restriction":"Regex | String"},{"name":"replacement","external_name":"replacement","restriction":"String"}],"visibility":"Public","body":"raise_unless_exists(relative_path)\n\nSpark.logger.log_action(\"REPLACING CONTENT\", \"#{relative_path} - '#{pattern.inspect}' for '#{replacement}'\", color: :yellow)\npattern = process_pattern(pattern)\nexisting_file_content = ::File.read(relative_path)\nnew_file_content = existing_file_content.gsub(pattern, replacement)\n\n::File.write(relative_path, new_file_content)\n"},"external_var":false}],"types":[{"html_id":"Spark/Spark/File/CreateFile","path":"Spark/File/CreateFile.html","kind":"class","full_name":"Spark::File::CreateFile","name":"CreateFile","abstract":false,"superclass":{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"Spark/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/spark/file/create_file.cr","line_number":4,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"Spark/Spark/File","kind":"module","full_name":"Spark::File","name":"File"},"doc":"CreateFile acts as a convenient wrapper to perform file creation.","summary":"<p>CreateFile acts as a convenient wrapper to perform file creation.</p>","constructors":[{"html_id":"new(relative_path:String,content:String)-class-method","name":"new","doc":"Set up a new CreateFile object for creation.","summary":"<p>Set up a new CreateFile object for creation.</p>","abstract":false,"args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":"String"}],"args_string":"(relative_path : String, content : String)","args_html":"(relative_path : String, content : String)","location":{"filename":"src/spark/file/create_file.cr","line_number":9,"url":null},"def":{"name":"new","args":[{"name":"relative_path","external_name":"relative_path","restriction":"String"},{"name":"content","external_name":"content","restriction":"String"}],"visibility":"Public","body":"_ = allocate\n_.initialize(relative_path, content)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"call-instance-method","name":"call","doc":"Create the initialized `CreateFile` object.","summary":"<p>Create the initialized <code><a href=\"../../Spark/File/CreateFile.html\">CreateFile</a></code> object.</p>","abstract":false,"location":{"filename":"src/spark/file/create_file.cr","line_number":13,"url":null},"def":{"name":"call","visibility":"Public","body":"Spark.logger.log_action(\"CREATING\", \"#{relative_path}\", color: :green)\nDir.mkdir_p(::File.dirname(relative_path))\n::File.write(relative_path, content)\n\nrelative_path\n"},"external_var":false},{"html_id":"content:String-instance-method","name":"content","abstract":false,"location":{"filename":"src/spark/file/create_file.cr","line_number":6,"url":null},"def":{"name":"content","return_type":"String","visibility":"Public","body":"@content"},"external_var":false},{"html_id":"relative_path:String-instance-method","name":"relative_path","abstract":false,"location":{"filename":"src/spark/file/create_file.cr","line_number":5,"url":null},"def":{"name":"relative_path","return_type":"String","visibility":"Public","body":"@relative_path"},"external_var":false}]},{"html_id":"Spark/Spark/File/InvalidPathError","path":"Spark/File/InvalidPathError.html","kind":"class","full_name":"Spark::File::InvalidPathError","name":"InvalidPathError","abstract":false,"superclass":{"html_id":"Spark/ArgumentError","kind":"class","full_name":"ArgumentError","name":"ArgumentError"},"ancestors":[{"html_id":"Spark/ArgumentError","kind":"class","full_name":"ArgumentError","name":"ArgumentError"},{"html_id":"Spark/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"Spark/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/spark/file/invalid_path_error.cr","line_number":3,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"Spark/Spark/File","kind":"module","full_name":"Spark::File","name":"File"}}]},{"html_id":"Spark/Spark/Prompt","path":"Spark/Prompt.html","kind":"class","full_name":"Spark::Prompt","name":"Prompt","abstract":false,"superclass":{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"Spark/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/spark/prompt.cr","line_number":7,"url":null},{"filename":"src/spark/prompt/confirmation_question.cr","line_number":4,"url":null},{"filename":"src/spark/prompt/question.cr","line_number":2,"url":null},{"filename":"src/spark/prompt/statement.cr","line_number":2,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"Spark/Spark","kind":"module","full_name":"Spark","name":"Spark"},"doc":"Spark::Prompt allows you to interact with users to gather input or display messages","summary":"<p>Spark::Prompt allows you to interact with users to gather input or display messages</p>","constructors":[{"html_id":"new(input:IO::FileDescriptor=STDIN,output:IO::FileDescriptor=STDOUT)-class-method","name":"new","doc":"Initialize a new Spark::Prompt","summary":"<p>Initialize a new Spark::Prompt</p>","abstract":false,"args":[{"name":"input","default_value":"STDIN","external_name":"input","restriction":"IO::FileDescriptor"},{"name":"output","default_value":"STDOUT","external_name":"output","restriction":"IO::FileDescriptor"}],"args_string":"(input : IO::FileDescriptor = STDIN, output : IO::FileDescriptor = STDOUT)","args_html":"(input : IO::FileDescriptor = <span class=\"t\">STDIN</span>, output : IO::FileDescriptor = <span class=\"t\">STDOUT</span>)","location":{"filename":"src/spark/prompt.cr","line_number":15,"url":null},"def":{"name":"new","args":[{"name":"input","default_value":"STDIN","external_name":"input","restriction":"IO::FileDescriptor"},{"name":"output","default_value":"STDOUT","external_name":"output","restriction":"IO::FileDescriptor"}],"visibility":"Public","body":"_ = allocate\n_.initialize(input, output)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"ask(message:String,**options):String-instance-method","name":"ask","doc":"Ask the user a question.\n\nExample:\n```\nprompt = Spark::Prompt.new\nprompt.ask(\"What is your name?\") # => \"What is your name?\"\n```","summary":"<p>Ask the user a question.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":"String"}],"args_string":"(message : String, **options) : String","args_html":"(message : String, **options) : String","location":{"filename":"src/spark/prompt.cr","line_number":79,"url":null},"def":{"name":"ask","args":[{"name":"message","external_name":"message","restriction":"String"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"return_type":"String","visibility":"Public","body":"if message.blank?\n  return \"\"\nend\n\nquestion = Question(String, String).new(self, **options)\n(question.call(message)).to_s\n"},"external_var":false},{"html_id":"ask(message:String,**options,&block:Spark::Prompt::Question(String,String)->_):String-instance-method","name":"ask","doc":"Ask the user a question with optional validation.\n\nExample with validation:\n```\nprompt = Spark::Prompt.new\nprompt.ask(\"What is your name?\") do |question|\n  question.validate(/LuckyCasts/, error_message: \"Name must be 'LuckyCasts'\")\nend\n# => \"What is your name?\"\n```","summary":"<p>Ask the user a question with optional validation.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":"String"}],"args_string":"(message : String, **options, &block : Spark::Prompt::Question(String, String) -> _) : String","args_html":"(message : String, **options, &block : <a href=\"../Spark/Prompt/Question.html\">Spark::Prompt::Question</a>(String, String) -> _) : String","location":{"filename":"src/spark/prompt.cr","line_number":96,"url":null},"def":{"name":"ask","args":[{"name":"message","external_name":"message","restriction":"String"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"yields":1,"block_arity":1,"block_arg":{"name":"block","external_name":"block","restriction":"(Spark::Prompt::Question(String, String) -> _)"},"return_type":"String","visibility":"Public","body":"if message.blank?\n  return \"\"\nend\n\nquestion = Question(String, String).new(self, **options)\n(question.call(message, &block)).to_s\n"},"external_var":false},{"html_id":"decorate(string:String,color:Symbol|Nil=nil,style:Symbol|Nil=nil)-instance-method","name":"decorate","doc":"Color and stylize a given string.\n\nExample:\n```\nprompt = Spark::Prompt.new\nprompt.decorate(\"This is an example\", color: :green, style: :bold) # => \"\\e[32;1mHello, there!\\e[0m\\n\"\n```","summary":"<p>Color and stylize a given string.</p>","abstract":false,"args":[{"name":"string","external_name":"string","restriction":"String"},{"name":"color","default_value":"nil","external_name":"color","restriction":"Symbol | ::Nil"},{"name":"style","default_value":"nil","external_name":"style","restriction":"Symbol | ::Nil"}],"args_string":"(string : String, color : Symbol | Nil = nil, style : Symbol | Nil = nil)","args_html":"(string : String, color : Symbol | Nil = <span class=\"n\">nil</span>, style : Symbol | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/spark/prompt.cr","line_number":148,"url":null},"def":{"name":"decorate","args":[{"name":"string","external_name":"string","restriction":"String"},{"name":"color","default_value":"nil","external_name":"color","restriction":"Symbol | ::Nil"},{"name":"style","default_value":"nil","external_name":"style","restriction":"Symbol | ::Nil"}],"visibility":"Public","body":"string = if color = Colorize::ColorANSI.parse?(color.to_s)\n  string.colorize(color)\nelse\n  string.colorize(:default)\nend\n\nif style = Colorize::Mode.parse?(style.to_s)\n  string.mode(style)\nelse\n  string\nend\n"},"external_var":false},{"html_id":"newline-instance-method","name":"newline","doc":"Output an empty line to the user's prompt.\n\nExample:\n```\nprompt = Spark::Prompt.new\nprompt.say(\"This is an example\") # => \"This is an example\\n\"\nprompt.newline                   # => \"\\n\"\n```","summary":"<p>Output an empty line to the user's prompt.</p>","abstract":false,"location":{"filename":"src/spark/prompt.cr","line_number":68,"url":null},"def":{"name":"newline","visibility":"Public","body":"(Statement.new(self)).call(\"\")"},"external_var":false},{"html_id":"no?(message:String,**options):Bool-instance-method","name":"no?","doc":"Ask the user a yes/no question, where the default is \"No\".\n\nExample:\n```\nprompt = Spark::Prompt.new\nif prompt.no? \"Are you feeling happy today?\"\n  prompt.say \"I'm sorry to hear that.\"\nelse\n  prompt.say \"Then it's going to be a great day!\"\nend\n```","summary":"<p>Ask the user a yes/no question, where the default is &quot;No&quot;.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":"String"}],"args_string":"(message : String, **options) : Bool","args_html":"(message : String, **options) : Bool","location":{"filename":"src/spark/prompt.cr","line_number":133,"url":null},"def":{"name":"no?","args":[{"name":"message","external_name":"message","restriction":"String"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"return_type":"Bool","visibility":"Public","body":"if message.blank?\n  return false\nend\n\noptions_with_default = options.merge(default: false)\nquestion = ConfirmationQuestion.new(self, **options_with_default)\nquestion.call(message)\n"},"external_var":false},{"html_id":"say(message:String=\"\",**options)-instance-method","name":"say","doc":"Output some text to a user, with an optional color and style.\n\nPlain example:\n```\nprompt = Spark::Prompt.new\nprompt.say(\"This is an example\") # => \"This is an example\\n\"\n```\n\nWithout a newline:\n```\nprompt = Spark::Prompt.new\nprompt.say(\"This is an example\", newline: false) # => \"This is an example\"\n```\n\nWith color and style (see Spark::Prompt#decorate):\n```\nprompt = Spark::Prompt.new\nprompt.say(\"This is an example\", color: :green, style: :bold) # => \"\\e[32;1mHello, there!\\e[0m\\n\"\n```","summary":"<p>Output some text to a user, with an optional color and style.</p>","abstract":false,"args":[{"name":"message","default_value":"\"\"","external_name":"message","restriction":"String"}],"args_string":"(message : String = \"\", **options)","args_html":"(message : String = <span class=\"s\">&quot;&quot;</span>, **options)","location":{"filename":"src/spark/prompt.cr","line_number":53,"url":null},"def":{"name":"say","args":[{"name":"message","default_value":"\"\"","external_name":"message","restriction":"String"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"visibility":"Public","body":"if message.blank?\n  return\nend\n\nstatement = Statement.new(self, **options)\nstatement.call(message)\n"},"external_var":false},{"html_id":"yes?(message:String,**options):Bool-instance-method","name":"yes?","doc":"Ask the user a yes/no question, where the default is \"Yes\".\n\nExample:\n```\nprompt = Spark::Prompt.new\nif prompt.yes? \"Did you tell me the truth?\"\n  prompt.say \"Great! Thank you, #{user_name}.\", color: :green\nelse\n  prompt.say \"Shame on you!\"\nend\n```","summary":"<p>Ask the user a yes/no question, where the default is &quot;Yes&quot;.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":"String"}],"args_string":"(message : String, **options) : Bool","args_html":"(message : String, **options) : Bool","location":{"filename":"src/spark/prompt.cr","line_number":114,"url":null},"def":{"name":"yes?","args":[{"name":"message","external_name":"message","restriction":"String"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"return_type":"Bool","visibility":"Public","body":"if message.blank?\n  return false\nend\n\noptions_with_default = options.merge(default: true)\nquestion = ConfirmationQuestion.new(self, **options_with_default)\nquestion.call(message)\n"},"external_var":false}],"types":[{"html_id":"Spark/Spark/Prompt/ConfirmationQuestion","path":"Spark/Prompt/ConfirmationQuestion.html","kind":"class","full_name":"Spark::Prompt::ConfirmationQuestion","name":"ConfirmationQuestion","abstract":false,"superclass":{"html_id":"Spark/Spark/Prompt/Question","kind":"class","full_name":"Spark::Prompt::Question","name":"Question"},"ancestors":[{"html_id":"Spark/Spark/Prompt/Question","kind":"class","full_name":"Spark::Prompt::Question","name":"Question"},{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"Spark/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/spark/prompt/confirmation_question.cr","line_number":5,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"Spark/Spark/Prompt","kind":"class","full_name":"Spark::Prompt","name":"Prompt"},"constructors":[{"html_id":"new(prompt:Spark::Prompt,color:Symbol|Nil=nil,style:Symbol|Nil=nil,default:DefaultAnswerType|Nil=nil,**options)-class-method","name":"new","doc":"Creates a new Question.","summary":"<p>Creates a new Question.</p>","abstract":false,"args":[{"name":"prompt","external_name":"prompt","restriction":"Spark::Prompt"},{"name":"color","default_value":"nil","external_name":"color","restriction":"Symbol | ::Nil"},{"name":"style","default_value":"nil","external_name":"style","restriction":"Symbol | ::Nil"},{"name":"default","default_value":"nil","external_name":"default","restriction":"DefaultAnswerType | ::Nil"}],"args_string":"(prompt : Spark::Prompt, color : Symbol | Nil = nil, style : Symbol | Nil = nil, default : DefaultAnswerType | Nil = nil, **options)","args_html":"(prompt : <a href=\"../../Spark/Prompt.html\">Spark::Prompt</a>, color : Symbol | Nil = <span class=\"n\">nil</span>, style : Symbol | Nil = <span class=\"n\">nil</span>, default : DefaultAnswerType | Nil = <span class=\"n\">nil</span>, **options)","location":{"filename":"src/spark/prompt/question.cr","line_number":40,"url":null},"def":{"name":"new","args":[{"name":"prompt","external_name":"prompt","restriction":"Spark::Prompt"},{"name":"color","default_value":"nil","external_name":"color","restriction":"Symbol | ::Nil"},{"name":"style","default_value":"nil","external_name":"style","restriction":"Symbol | ::Nil"},{"name":"default","default_value":"nil","external_name":"default","restriction":"DefaultAnswerType | ::Nil"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"visibility":"Public","body":"_ = allocate\n_.initialize(prompt, color, style, default, **options)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}]},{"html_id":"Spark/Spark/Prompt/Question","path":"Spark/Prompt/Question.html","kind":"class","full_name":"Spark::Prompt::Question(AnswerType, DefaultAnswerType)","name":"Question","abstract":false,"superclass":{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"Spark/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/spark/prompt/question.cr","line_number":4,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"Spark/Spark/Prompt/ConfirmationQuestion","kind":"class","full_name":"Spark::Prompt::ConfirmationQuestion","name":"ConfirmationQuestion"}],"namespace":{"html_id":"Spark/Spark/Prompt","kind":"class","full_name":"Spark::Prompt","name":"Prompt"},"doc":"A Question is used to gather user input.","summary":"<p>A Question is used to gather user input.</p>","constructors":[{"html_id":"new(prompt:Spark::Prompt,color:Symbol|Nil=nil,style:Symbol|Nil=nil,default:DefaultAnswerType|Nil=nil,**options)-class-method","name":"new","doc":"Creates a new Question.","summary":"<p>Creates a new Question.</p>","abstract":false,"args":[{"name":"prompt","external_name":"prompt","restriction":"Spark::Prompt"},{"name":"color","default_value":"nil","external_name":"color","restriction":"Symbol | ::Nil"},{"name":"style","default_value":"nil","external_name":"style","restriction":"Symbol | ::Nil"},{"name":"default","default_value":"nil","external_name":"default","restriction":"DefaultAnswerType | ::Nil"}],"args_string":"(prompt : Spark::Prompt, color : Symbol | Nil = nil, style : Symbol | Nil = nil, default : DefaultAnswerType | Nil = nil, **options)","args_html":"(prompt : <a href=\"../../Spark/Prompt.html\">Spark::Prompt</a>, color : Symbol | Nil = <span class=\"n\">nil</span>, style : Symbol | Nil = <span class=\"n\">nil</span>, default : DefaultAnswerType | Nil = <span class=\"n\">nil</span>, **options)","location":{"filename":"src/spark/prompt/question.cr","line_number":40,"url":null},"def":{"name":"new","args":[{"name":"prompt","external_name":"prompt","restriction":"Spark::Prompt"},{"name":"color","default_value":"nil","external_name":"color","restriction":"Symbol | ::Nil"},{"name":"style","default_value":"nil","external_name":"style","restriction":"Symbol | ::Nil"},{"name":"default","default_value":"nil","external_name":"default","restriction":"DefaultAnswerType | ::Nil"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"visibility":"Public","body":"_ = Question(AnswerType, DefaultAnswerType).allocate\n_.initialize(prompt, color, style, default, **options)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"call(message:String):AnswerType|Nil-instance-method","name":"call","doc":"Ask the question to the user.\n\nThis handles adding the default text, a space before user input, and decoration.\n\nIt also gathers user input.","summary":"<p>Ask the question to the user.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":"String"}],"args_string":"(message : String) : AnswerType | Nil","args_html":"(message : String) : AnswerType | Nil","location":{"filename":"src/spark/prompt/question.cr","line_number":54,"url":null},"def":{"name":"call","args":[{"name":"message","external_name":"message","restriction":"String"}],"return_type":"AnswerType | ::Nil","visibility":"Public","body":"message = add_default_to_message(message)\nmessage = message + \" \"\nmessage = @prompt.decorate(message, color, style)\n@prompt.print(message)\n\ninput = @prompt.gets\n\nprocess_input(input)\n"},"external_var":false},{"html_id":"call(message:String,&)-instance-method","name":"call","doc":"Ask the question to the user, including a block with additional settings.\n\nWe optionally allow the ability to re-collect invalid input.\n\nIf `@retry_on_validation_failure` is `true` (set via `#validate`), we collect input until it is valid.\nIf `@retry_on_validation_failure` is `false` (set via `#validate`), we collect input once and return `nil` if it is invalid.","summary":"<p>Ask the question to the user, including a block with additional settings.</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":"String"}],"args_string":"(message : String, &)","args_html":"(message : String, &)","location":{"filename":"src/spark/prompt/question.cr","line_number":71,"url":null},"def":{"name":"call","args":[{"name":"message","external_name":"message","restriction":"String"}],"yields":1,"block_arity":1,"visibility":"Public","body":"message = add_default_to_message(message)\nmessage = message + \" \"\nmessage = @prompt.decorate(message, color, style)\n\nyield(self)\n\ninput = collect_input_for(message)\n\nwhile !(valid_input?(input))\n  print_validation_error_message\n\n  if @retry_on_validation_failure\n    input = collect_input_for(message)\n  else\n    input = nil\n    break\n  end\nend\n\nprocess_input(input)\n"},"external_var":false},{"html_id":"color-instance-method","name":"color","doc":"Which color to use to colorize the Question output.\n\nSee https://crystal-lang.org/api/latest/Colorize.html\n\nExample:\n```\n:default\n:black\n:red\n:green\n:yellow\n:blue\n```","summary":"<p>Which color to use to colorize the Question output.</p>","abstract":false,"location":{"filename":"src/spark/prompt/question.cr","line_number":18,"url":null},"def":{"name":"color","visibility":"Public","body":"@color"},"external_var":false},{"html_id":"default-instance-method","name":"default","doc":"Which default value to use for a blank/empty response to the Question.","summary":"<p>Which default value to use for a blank/empty response to the Question.</p>","abstract":false,"location":{"filename":"src/spark/prompt/question.cr","line_number":37,"url":null},"def":{"name":"default","visibility":"Public","body":"@default"},"external_var":false},{"html_id":"style-instance-method","name":"style","doc":"Which mode to use to stylize the Question output.\n\nSee https://crystal-lang.org/api/latest/Colorize.html\n\nExample:\n```\n:bold\n:bright\n:dim\n:underline\n:blink\n:reverse\n:hidden\n```","summary":"<p>Which mode to use to stylize the Question output.</p>","abstract":false,"location":{"filename":"src/spark/prompt/question.cr","line_number":34,"url":null},"def":{"name":"style","visibility":"Public","body":"@style"},"external_var":false},{"html_id":"validate(validation:Regex,error_message:String|Nil=nil,*,retry_on_failure:Bool=false)-instance-method","name":"validate","doc":"Provide validation for a `Spark::Prompt::Question`, optionally overriding the default error message.\n\nExample with the default message:\n```\nQuestion.new(Spark::Prompt.new).call(\"What is your name\") do |question|\n  question.validate(/LuckyCasts/)\nend\n# => \"What is your name?\"\n```\n\nExample with a custom message:\n```\nQuestion.new(Spark::Prompt.new).call(\"What is your name\") do |question|\n  question.validate(/LuckyCasts/, \"Your name must be 'LuckyCasts'\")\nend\n# => \"What is your name?\"\n```\n\nExample that retries on validation failure:\n```\nQuestion.new(Spark::Prompt.new).call(\"What is your name\") do |question|\n  question.validate(/LuckyCasts/, \"Your name must be 'LuckyCasts'. Please enter a valid value.\", retry_on_failure: true)\nend\n# => \"What is your name?\"\n```","summary":"<p>Provide validation for a <code><a href=\"../../Spark/Prompt/Question.html\">Spark::Prompt::Question</a></code>, optionally overriding the default error message.</p>","abstract":false,"args":[{"name":"validation","external_name":"validation","restriction":"Regex"},{"name":"error_message","default_value":"nil","external_name":"error_message","restriction":"String | ::Nil"},{"name":"","external_name":"","restriction":""},{"name":"retry_on_failure","default_value":"false","external_name":"retry_on_failure","restriction":"Bool"}],"args_string":"(validation : Regex, error_message : String | Nil = nil, *, retry_on_failure : Bool = false)","args_html":"(validation : Regex, error_message : String | Nil = <span class=\"n\">nil</span>, *, retry_on_failure : Bool = <span class=\"n\">false</span>)","location":{"filename":"src/spark/prompt/question.cr","line_number":119,"url":null},"def":{"name":"validate","args":[{"name":"validation","external_name":"validation","restriction":"Regex"},{"name":"error_message","default_value":"nil","external_name":"error_message","restriction":"String | ::Nil"},{"name":"","external_name":"","restriction":""},{"name":"retry_on_failure","default_value":"false","external_name":"retry_on_failure","restriction":"Bool"}],"splat_index":2,"visibility":"Public","body":"@validation = validation\n@retry_on_validation_failure = retry_on_failure\n\nif message = error_message\n  @validation_error_message = message\nelse\n  @validation_error_message = \"Your answer does not match '#{validation.inspect}'\"\nend\n"},"external_var":false}]},{"html_id":"Spark/Spark/Prompt/Statement","path":"Spark/Prompt/Statement.html","kind":"class","full_name":"Spark::Prompt::Statement","name":"Statement","abstract":false,"superclass":{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"Spark/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/spark/prompt/statement.cr","line_number":4,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"Spark/Spark/Prompt","kind":"class","full_name":"Spark::Prompt","name":"Prompt"},"doc":"Represents a statement output to the user's prompt.","summary":"<p>Represents a statement output to the user's prompt.</p>","constructors":[{"html_id":"new(prompt:Spark::Prompt,newline:Bool=true,color:Symbol|Nil=nil,style:Symbol|Nil=nil)-class-method","name":"new","doc":"Create a new Statement that can be rendered as output to the user's prompt.","summary":"<p>Create a new Statement that can be rendered as output to the user's prompt.</p>","abstract":false,"args":[{"name":"prompt","external_name":"prompt","restriction":"Spark::Prompt"},{"name":"newline","default_value":"true","external_name":"newline","restriction":"Bool"},{"name":"color","default_value":"nil","external_name":"color","restriction":"Symbol | ::Nil"},{"name":"style","default_value":"nil","external_name":"style","restriction":"Symbol | ::Nil"}],"args_string":"(prompt : Spark::Prompt, newline : Bool = true, color : Symbol | Nil = nil, style : Symbol | Nil = nil)","args_html":"(prompt : <a href=\"../../Spark/Prompt.html\">Spark::Prompt</a>, newline : Bool = <span class=\"n\">true</span>, color : Symbol | Nil = <span class=\"n\">nil</span>, style : Symbol | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/spark/prompt/statement.cr","line_number":10,"url":null},"def":{"name":"new","args":[{"name":"prompt","external_name":"prompt","restriction":"Spark::Prompt"},{"name":"newline","default_value":"true","external_name":"newline","restriction":"Bool"},{"name":"color","default_value":"nil","external_name":"color","restriction":"Symbol | ::Nil"},{"name":"style","default_value":"nil","external_name":"style","restriction":"Symbol | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(prompt, newline, color, style)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"call(message:String)-instance-method","name":"call","doc":"Output the Statement message to the prompt","summary":"<p>Output the Statement message to the prompt</p>","abstract":false,"args":[{"name":"message","external_name":"message","restriction":"String"}],"args_string":"(message : String)","args_html":"(message : String)","location":{"filename":"src/spark/prompt/statement.cr","line_number":19,"url":null},"def":{"name":"call","args":[{"name":"message","external_name":"message","restriction":"String"}],"visibility":"Public","body":"message = @prompt.decorate(message, color, style)\n\nif newline?\n  @prompt.puts(message)\nelse\n  @prompt.print(message)\nend\n"},"external_var":false},{"html_id":"color:Symbol?-instance-method","name":"color","abstract":false,"location":{"filename":"src/spark/prompt/statement.cr","line_number":6,"url":null},"def":{"name":"color","visibility":"Public","body":"@color"},"external_var":false},{"html_id":"newline?:Bool-instance-method","name":"newline?","abstract":false,"location":{"filename":"src/spark/prompt/statement.cr","line_number":5,"url":null},"def":{"name":"newline?","visibility":"Public","body":"@newline"},"external_var":false},{"html_id":"style:Symbol?-instance-method","name":"style","abstract":false,"location":{"filename":"src/spark/prompt/statement.cr","line_number":7,"url":null},"def":{"name":"style","visibility":"Public","body":"@style"},"external_var":false}]}]},{"html_id":"Spark/Spark/Shard","path":"Spark/Shard.html","kind":"module","full_name":"Spark::Shard","name":"Shard","abstract":false,"locations":[{"filename":"src/spark/shard.cr","line_number":4,"url":null},{"filename":"src/spark/shard/missing_shard_file_error.cr","line_number":2,"url":null},{"filename":"src/spark/shard/shard_content.cr","line_number":2,"url":null},{"filename":"src/spark/shard/shard_file.cr","line_number":2,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"extended_modules":[{"html_id":"Spark/Spark/Shard","kind":"module","full_name":"Spark::Shard","name":"Shard"}],"namespace":{"html_id":"Spark/Spark","kind":"module","full_name":"Spark","name":"Spark"},"instance_methods":[{"html_id":"add_shard(name:String,*,development_only:Bool=false,**options)-instance-method","name":"add_shard","doc":"Adds a shard to the project's `shard.yml`.\n\nExample with a GitHub production dependency:\n```\nSpark::Shard.add_shard(\"spark\", github: \"stephendolan/spark\", branch: \"main\")\n```\n\nExample with a GitHub development dependency:\n```\nSpark::Shard.add_shard(\"spark\", github: \"stephendolan/spark\", version: \"~> 1.0\", development_only: true)\n```\n\nExample with a git dependency:\n```\nSpark::Shard.add_shard(\"spark\", git: \"https://mycustomserver.com/stephendolan/spark\", version: \"~> 1.0\", development_only: true)\n```","summary":"<p>Adds a shard to the project's <code>shard.yml</code>.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"","external_name":"","restriction":""},{"name":"development_only","default_value":"false","external_name":"development_only","restriction":"Bool"}],"args_string":"(name : String, *, development_only : Bool = false, **options)","args_html":"(name : String, *, development_only : Bool = <span class=\"n\">false</span>, **options)","location":{"filename":"src/spark/shard.cr","line_number":36,"url":null},"def":{"name":"add_shard","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"","external_name":"","restriction":""},{"name":"development_only","default_value":"false","external_name":"development_only","restriction":"Bool"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":1,"visibility":"Public","body":"shard_file = ShardFile.new(shard_file_path)\n\nSpark.logger.log_action(\"ADD SHARD\", name, color: :green)\n\nif shard_file.contains_shard?(name)\n  return\nend\n\nshard_content = (ShardContent.new(name, **options)).to_s\n\nif development_only\n  add_development_shard(shard_file, shard_content)\nelse\n  add_production_shard(shard_file, shard_content)\nend\n"},"external_var":false},{"html_id":"shard_file_path-instance-method","name":"shard_file_path","doc":"Which path to search to find the Crystal shard definition.","summary":"<p>Which path to search to find the Crystal shard definition.</p>","abstract":false,"location":{"filename":"src/spark/shard.cr","line_number":8,"url":null},"def":{"name":"shard_file_path","visibility":"Public","body":"if (value = @@shard_file_path).nil?\n  @@shard_file_path = \"shard.yml\"\nelse\n  value\nend"},"external_var":false},{"html_id":"shard_file_path=(shard_file_path)-instance-method","name":"shard_file_path=","doc":"Control which path to search to find the Crystal shard definition.","summary":"<p>Control which path to search to find the Crystal shard definition.</p>","abstract":false,"args":[{"name":"shard_file_path","external_name":"shard_file_path","restriction":""}],"args_string":"(shard_file_path)","args_html":"(shard_file_path)","location":{"filename":"src/spark/shard.cr","line_number":17,"url":null},"def":{"name":"shard_file_path=","args":[{"name":"shard_file_path","external_name":"shard_file_path","restriction":""}],"visibility":"Public","body":"@@shard_file_path = shard_file_path"},"external_var":false}],"types":[{"html_id":"Spark/Spark/Shard/MissingShardFileError","path":"Spark/Shard/MissingShardFileError.html","kind":"class","full_name":"Spark::Shard::MissingShardFileError","name":"MissingShardFileError","abstract":false,"superclass":{"html_id":"Spark/ArgumentError","kind":"class","full_name":"ArgumentError","name":"ArgumentError"},"ancestors":[{"html_id":"Spark/ArgumentError","kind":"class","full_name":"ArgumentError","name":"ArgumentError"},{"html_id":"Spark/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"Spark/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/spark/shard/missing_shard_file_error.cr","line_number":3,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"Spark/Spark/Shard","kind":"module","full_name":"Spark::Shard","name":"Shard"}},{"html_id":"Spark/Spark/Shard/ShardContent","path":"Spark/Shard/ShardContent.html","kind":"class","full_name":"Spark::Shard::ShardContent","name":"ShardContent","abstract":false,"superclass":{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"Spark/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/spark/shard/shard_content.cr","line_number":3,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"Spark/Spark/Shard","kind":"module","full_name":"Spark::Shard","name":"Shard"},"constructors":[{"html_id":"new(name:String,github:String|Nil=nil,git:String|Nil=nil,version:String|Nil=nil,branch:String|Nil=nil)-class-method","name":"new","doc":"Given some basic shard information, provides an object that can be written to `shard.yml` with `#to_s`.","summary":"<p>Given some basic shard information, provides an object that can be written to <code>shard.yml</code> with <code><a href=\"../../Spark/Shard/ShardContent.html#to_s-instance-method\">#to_s</a></code>.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"github","default_value":"nil","external_name":"github","restriction":"String | ::Nil"},{"name":"git","default_value":"nil","external_name":"git","restriction":"String | ::Nil"},{"name":"version","default_value":"nil","external_name":"version","restriction":"String | ::Nil"},{"name":"branch","default_value":"nil","external_name":"branch","restriction":"String | ::Nil"}],"args_string":"(name : String, github : String | Nil = nil, git : String | Nil = nil, version : String | Nil = nil, branch : String | Nil = nil)","args_html":"(name : String, github : String | Nil = <span class=\"n\">nil</span>, git : String | Nil = <span class=\"n\">nil</span>, version : String | Nil = <span class=\"n\">nil</span>, branch : String | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/spark/shard/shard_content.cr","line_number":42,"url":null},"def":{"name":"new","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"github","default_value":"nil","external_name":"github","restriction":"String | ::Nil"},{"name":"git","default_value":"nil","external_name":"git","restriction":"String | ::Nil"},{"name":"version","default_value":"nil","external_name":"version","restriction":"String | ::Nil"},{"name":"branch","default_value":"nil","external_name":"branch","restriction":"String | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(name, github, git, version, branch)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"branch:String?-instance-method","name":"branch","doc":"The branch of the shard to use.\nEither `#version` or `#branch` may be optionally provided, but not both.\n\nExample:\n```\nmain\n```","summary":"<p>The branch of the shard to use.</p>","abstract":false,"location":{"filename":"src/spark/shard/shard_content.cr","line_number":39,"url":null},"def":{"name":"branch","visibility":"Public","body":"@branch"},"external_var":false},{"html_id":"git:String?-instance-method","name":"git","doc":"The git URL of the shard.\n\nExample:\n```\nhttps://mycustomserver.com/stephendolan/spark\n```","summary":"<p>The git URL of the shard.</p>","abstract":false,"location":{"filename":"src/spark/shard/shard_content.cr","line_number":21,"url":null},"def":{"name":"git","visibility":"Public","body":"@git"},"external_var":false},{"html_id":"github:String?-instance-method","name":"github","doc":"The GitHub spath of the shard.\n\nExample:\n```\nstephendolan/spark\n```","summary":"<p>The GitHub spath of the shard.</p>","abstract":false,"location":{"filename":"src/spark/shard/shard_content.cr","line_number":13,"url":null},"def":{"name":"github","visibility":"Public","body":"@github"},"external_var":false},{"html_id":"name:String-instance-method","name":"name","doc":"The name of the shard","summary":"<p>The name of the shard</p>","abstract":false,"location":{"filename":"src/spark/shard/shard_content.cr","line_number":5,"url":null},"def":{"name":"name","visibility":"Public","body":"@name"},"external_var":false},{"html_id":"source-instance-method","name":"source","doc":"Intelligently determine whether to use the GitHub or git source for a shard.\n\nOutputs a `shard.yml`-friendly version of the source.\n\nExample:\n```\nSpark::Shard::ShardContent.new(name: \"test\", github: \"stephendolan/spark\").source                         # => \"github: stephendolan/spark\"\nSpark::Shard::ShardContent.new(name: \"test\", git: \"https://custom-git.com/stephendolan/spark.git\").source # => \"git: https://custom-git.com/stephendolan/spark.git\"\n```","summary":"<p>Intelligently determine whether to use the GitHub or git source for a shard.</p>","abstract":false,"location":{"filename":"src/spark/shard/shard_content.cr","line_number":54,"url":null},"def":{"name":"source","visibility":"Public","body":"if github.nil? && git.nil?\n  raise(ArgumentError.new(\"Must provide either `git` or `github` for shard content.\"))\nend\n\nif github && git\n  raise(ArgumentError.new(\"Cannot provide both `git` and `github` for shard content.\"))\nend\n\nif github\n  \"github: #{github}\"\nelse\n  \"git: #{git}\"\nend\n"},"external_var":false},{"html_id":"to_s-instance-method","name":"to_s","doc":"Outputs a `shard.yml`-friendly representation of the given shard content.\n\nEvery shard should be nested under a header section, so we always indent with two spaces.\n\nExample:\n```\nshard_content = Spark::Shard::ShardContent.new(name: \"spark\", github: \"stephendolan/spark\", version: \"~> 1.0.3\")\nshard_content.to_s # => <<-CONTENT\n  spark:\n    github: stephendolan/spark\n    version: ~> 1.0.3\nCONTENT\n```","summary":"<p>Outputs a <code>shard.yml</code>-friendly representation of the given shard content.</p>","abstract":false,"location":{"filename":"src/spark/shard/shard_content.cr","line_number":107,"url":null},"def":{"name":"to_s","visibility":"Public","body":"output = \"  #{name}:\\n    #{source}\\n    #{version_or_branch}\"\n\n\noutput.rstrip(\" \")\n"},"external_var":false},{"html_id":"version:String?-instance-method","name":"version","doc":"The version of the shard.\nEither `#version` or `#branch` may be optionally provided, but not both.\n\nExample:\n```\n~> 1.0.3\n```","summary":"<p>The version of the shard.</p>","abstract":false,"location":{"filename":"src/spark/shard/shard_content.cr","line_number":30,"url":null},"def":{"name":"version","visibility":"Public","body":"@version"},"external_var":false},{"html_id":"version_or_branch-instance-method","name":"version_or_branch","doc":"Intelligently determine whether to use the branch or a version string for the shard.\n\nOutputs a `shard.yml`-friendly variant of the version or branch, which is always suffixed\nwith a newline since it is the last line in a shard definition. This allows for a simpler `#to_s` implementation.\n\nExample:\n```\nSpark::Shard::ShardContent.new(name: \"test\", github: \"stephendolan/spark\", version: \"~> 1.0.3\").version_or_branch # => \"version: ~> 1.0.3\\n\"\nSpark::Shard::ShardContent.new(name: \"test\", github: \"stephendolan/spark\", branch: \"main\").version_or_branch      # => \"branch: main\\n\"\n```","summary":"<p>Intelligently determine whether to use the branch or a version string for the shard.</p>","abstract":false,"location":{"filename":"src/spark/shard/shard_content.cr","line_number":80,"url":null},"def":{"name":"version_or_branch","visibility":"Public","body":"if version && branch\n  raise(ArgumentError.new(\"Cannot provide both `version` and `branch` for shard content.\"))\nend\n\nif version\n  \"version: #{version}\\n\"\nelsif branch\n  \"branch: #{branch}\\n\"\nelse\n  \"\"\nend\n"},"external_var":false}]},{"html_id":"Spark/Spark/Shard/ShardFile","path":"Spark/Shard/ShardFile.html","kind":"class","full_name":"Spark::Shard::ShardFile","name":"ShardFile","abstract":false,"superclass":{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"Spark/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"Spark/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/spark/shard/shard_file.cr","line_number":3,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"Spark/Spark/Shard","kind":"module","full_name":"Spark::Shard","name":"Shard"},"constructors":[{"html_id":"new(path:String)-class-method","name":"new","doc":"Creates a new `ShardFile` that parses the given path for `shard.yml` content.","summary":"<p>Creates a new <code><a href=\"../../Spark/Shard/ShardFile.html\">ShardFile</a></code> that parses the given path for <code>shard.yml</code> content.</p>","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String"}],"args_string":"(path : String)","args_html":"(path : String)","location":{"filename":"src/spark/shard/shard_file.cr","line_number":14,"url":null},"def":{"name":"new","args":[{"name":"path","external_name":"path","restriction":"String"}],"visibility":"Public","body":"_ = allocate\n_.initialize(path)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"contains_shard?(name:String)-instance-method","name":"contains_shard?","doc":"Determine whether or not the `ShardFile` already has an entry for the given shard.\n\nExample:\n```yaml\n  name: test_shard_yml\n\n  version: x.x.x\n\n  dependencies:\n    spark:\n      github: stephendolan/spark\n```\n\n```\nSpark::Shard::ShardFile.new(\"shard.yml\").contains_shard?(\"spark\") # => true\nSpark::Shard::ShardFile.new(\"shard.yml\").contains_shard?(\"lucky\") # => false\n```","summary":"<p>Determine whether or not the <code><a href=\"../../Spark/Shard/ShardFile.html\">ShardFile</a></code> already has an entry for the given shard.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"}],"args_string":"(name : String)","args_html":"(name : String)","location":{"filename":"src/spark/shard/shard_file.cr","line_number":39,"url":null},"def":{"name":"contains_shard?","args":[{"name":"name","external_name":"name","restriction":"String"}],"visibility":"Public","body":"(/\\b#{name}:\\s*\\n/).matches?(content)"},"external_var":false},{"html_id":"content:String-instance-method","name":"content","doc":"The content of the shard file in its entirety.","summary":"<p>The content of the shard file in its entirety.</p>","abstract":false,"location":{"filename":"src/spark/shard/shard_file.cr","line_number":5,"url":null},"def":{"name":"content","return_type":"String","visibility":"Public","body":"@content"},"external_var":false},{"html_id":"has_development_dependencies_section?:Bool-instance-method","name":"has_development_dependencies_section?","doc":"Whether or not the `development_dependencies:` header exists in the shard file.","summary":"<p>Whether or not the <code>development_dependencies:</code> header exists in the shard file.</p>","abstract":false,"location":{"filename":"src/spark/shard/shard_file.cr","line_number":8,"url":null},"def":{"name":"has_development_dependencies_section?","return_type":"Bool","visibility":"Public","body":"@has_development_dependencies_section"},"external_var":false},{"html_id":"has_production_dependencies_section?:Bool-instance-method","name":"has_production_dependencies_section?","doc":"Whether or not the `dependencies:` header exists in the shard file.","summary":"<p>Whether or not the <code>dependencies:</code> header exists in the shard file.</p>","abstract":false,"location":{"filename":"src/spark/shard/shard_file.cr","line_number":11,"url":null},"def":{"name":"has_production_dependencies_section?","return_type":"Bool","visibility":"Public","body":"@has_production_dependencies_section"},"external_var":false}]}]},{"html_id":"Spark/Spark/Template","path":"Spark/Template.html","kind":"module","full_name":"Spark::Template","name":"Template","abstract":false,"locations":[{"filename":"src/spark/template.cr","line_number":19,"url":null}],"repository_name":"Spark","program":false,"enum":false,"alias":false,"const":false,"extended_modules":[{"html_id":"Spark/Spark/Template","kind":"module","full_name":"Spark::Template","name":"Template"}],"namespace":{"html_id":"Spark/Spark","kind":"module","full_name":"Spark","name":"Spark"},"doc":"Spark::Template facilitates the ability to run Crystal code from a local or remote file.\n\n**USE WITH CAUTION**. We do not check file contents before evaluating.\n\nSay you have a file with Crystal code you'd like to run that looks like this:\n```\n# /tmp/my_crystal_code.cr\nprompt = Spark::Prompt.new\nprompt.say \"Hello, from my Crystal file!\"\n```\n\nYou could run that code like this:\n```\nSpark::Template.run_local_file(\"/tmp/my_crystal_code.cr\")\n```","summary":"<p>Spark::Template facilitates the ability to run Crystal code from a local or remote file.</p>","instance_methods":[{"html_id":"run_local_file(file_path:String,apply_prefix_content:Bool=true,output:IO::FileDescriptor=STDOUT)-instance-method","name":"run_local_file","doc":"Execute the Crystal code at a given local file path.\n\n**USE WITH CAUTION**. We do not check file contents before evaluating.\n\nExample:\n```\nSpark::Template.run_local_file(\"/tmp/my_crystal_file.cr\")\n```","summary":"<p>Execute the Crystal code at a given local file path.</p>","abstract":false,"args":[{"name":"file_path","external_name":"file_path","restriction":"String"},{"name":"apply_prefix_content","default_value":"true","external_name":"apply_prefix_content","restriction":"Bool"},{"name":"output","default_value":"STDOUT","external_name":"output","restriction":"IO::FileDescriptor"}],"args_string":"(file_path : String, apply_prefix_content : Bool = true, output : IO::FileDescriptor = STDOUT)","args_html":"(file_path : String, apply_prefix_content : Bool = <span class=\"n\">true</span>, output : IO::FileDescriptor = <span class=\"t\">STDOUT</span>)","location":{"filename":"src/spark/template.cr","line_number":53,"url":null},"def":{"name":"run_local_file","args":[{"name":"file_path","external_name":"file_path","restriction":"String"},{"name":"apply_prefix_content","default_value":"true","external_name":"apply_prefix_content","restriction":"Bool"},{"name":"output","default_value":"STDOUT","external_name":"output","restriction":"IO::FileDescriptor"}],"visibility":"Public","body":"begin\n  Spark.logger.log_action(\"APPLYING LOCAL TEMPLATE\", file_path, color: :yellow)\n  apply_file(file_path, apply_prefix_content: apply_prefix_content, output: output)\nrescue error\n  raise(\"Failed to apply local template: #{error.message}\")\nend"},"external_var":false},{"html_id":"run_remote_file(url:String,apply_prefix_content:Bool=true,output:IO::FileDescriptor=STDOUT)-instance-method","name":"run_remote_file","doc":"Execute the Crystal code at a given remote URL.\n\n**USE WITH CAUTION**. We do not check file contents before evaluating.\n\nExample:\n```\nSpark::Template.run_remote_file(\"https://railsbytes.com/script/Xg8sya\")\n```","summary":"<p>Execute the Crystal code at a given remote URL.</p>","abstract":false,"args":[{"name":"url","external_name":"url","restriction":"String"},{"name":"apply_prefix_content","default_value":"true","external_name":"apply_prefix_content","restriction":"Bool"},{"name":"output","default_value":"STDOUT","external_name":"output","restriction":"IO::FileDescriptor"}],"args_string":"(url : String, apply_prefix_content : Bool = true, output : IO::FileDescriptor = STDOUT)","args_html":"(url : String, apply_prefix_content : Bool = <span class=\"n\">true</span>, output : IO::FileDescriptor = <span class=\"t\">STDOUT</span>)","location":{"filename":"src/spark/template.cr","line_number":30,"url":null},"def":{"name":"run_remote_file","args":[{"name":"url","external_name":"url","restriction":"String"},{"name":"apply_prefix_content","default_value":"true","external_name":"apply_prefix_content","restriction":"Bool"},{"name":"output","default_value":"STDOUT","external_name":"output","restriction":"IO::FileDescriptor"}],"visibility":"Public","body":"begin\n  Spark.logger.log_action(\"APPLYING REMOTE TEMPLATE\", url, color: :yellow)\n  response = HTTP::Client.get(url)\n\n  tempfile = ::File.tempfile\n  ::File.write(tempfile.path, response.body)\n\n  apply_file(tempfile.path, apply_prefix_content: apply_prefix_content, output: output)\nrescue error\n  raise(\"Failed to apply remote template: #{error.message}\")\nensure\n  if tempfile\n    tempfile.delete\n  end\nend"},"external_var":false}]}]}]}}